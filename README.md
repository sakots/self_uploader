# SELF UPLOADER

SELF UPLOADERは、めっちゃ簡単に設置できるアップローダーです。

## なぜ作ったか

5chカラオケ板で、使いやすいあぷろだに人が集まって使いにくくなる現状を憂いて。

## 特徴

- 複数ファイルのドラッグアンドドロップ対応。
- 設置しやすさが最優先なので、最低限の設定しかありません。
- デフォルトでは自分(管理者)しかアップロードできませんが、設定で誰にでも開放できます。
- デフォルトでは音声ファイル(.mp3 .m4a .ogg .flacなど)のみの対応ですが、設定で（略

## 設置方法

1. `config.example.php`を`config.php`に改名、コピーします。
2. `config.php`UTF-8対応のテキストエディタで開いて、変えたいところを変えます。管理パスのみ、このままでは動かなくしてあります。
3. レンタルサーバーにsfupフォルダをフォルダごとアップロードします。
4. アップロードしたURLにアクセスすると、もう使えるんですよ奥さん！

## サンプル

[設置しました。](https://upload.sakots.red/)

あいことばは「あいことば」です。

## 展望

- まだ削除機能がない

## 更新履歴

### [2025/09/04] v0.2.1

- ディレクトリ権限チェックの柔軟化

### [2025/09/04] v0.2.0

- より多くの危険なファイル形式の検出を実装
  - 実行可能ファイル（Windows PE、ELF、Mach-O）
  - スクリプトファイル（PHP、Shell、Python、Perl）
  - アーカイブファイル（ZIP、GZIP、7ZIP）
- 深層スキャン機能実装
  - ファイル全体の内容スキャン
  - 危険なコードパターンの検出
  - 悪意のあるスクリプトの検出
- アンチウイルススキャン実装
  - カスタムウイルスシグネチャチェック
  - マルウェアパターンの検出
  - 自動危険ファイル削除
- ファイル重複チェック実装
  - SHA256ハッシュによる重複検出
  - データベースでの重複管理
  - ストレージ容量の最適化
- 高度なファイル整合性チェック実装
  - ファイル構造の詳細検証
  - 最小ファイルサイズチェック
  - オーディオファイル形式の厳密な検証
  - ファイルヘッダーの整合性確認
- エラーログ実装
- セキュリティ強化
- 既存関数の改善
- データベースに絡むが増えたので移行機能追加

### [2025/09/03] v0.1.7

- 悪意のあるファイルのアップロードを防止
- ファイル形式の偽装攻撃を検出
- 実行可能ファイルの混入を阻止
- オーディオファイルの整合性を保証
- エラー時の適切なクリーンアップ
- データベースとファイルシステムの整合性確認
- 孤立したファイルの検出
- 自動クリーンアップ機能

### [2025/07/15] v0.1.5

- キャッシュフォルダが自動生成されない問題修正
- ファイルアップロードに自動リダイレクト

### [2025/07/14] v0.1.3

- アップロード総量の表示
- 認証ロジックのバグを修正
- 何個ファイルをアップロードしても「1個アップロードしました」と表示されるのを修正
- MIME type検証を追加
- エラー情報の露出を制限
- パーミッション設定を改善
- レート制限実装
- データログ

### [2025/06/09] v0.1.2

- データベースロックエラーの軽減

### [2025/06/09] v0.1.1

- BladeOneバージョンアップ（4.18）
- 誤字整理
- 複数ファイルの同時アップロード対応
- 最大アップロードサイズの明記
- 安全性の向上

### [2021/10/27] v0.1.0

- うごくようになった。

### [2021/10/27] v0.0.1

- とりあえずつくった。最低限の見た目はある。
- アップロードはできない。
